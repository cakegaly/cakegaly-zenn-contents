---
title: "ãƒŸãƒ‹ãƒãƒªã‚ºãƒ ã‚’è¿½æ±‚ã—ãŸ Next.js 15 + MDX ãƒ–ãƒ­ã‚°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ next-minimal-blog ã‚’ä½œã‚Šã¾ã—ãŸï¼"
emoji: "ğŸ…"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["nextjs", "tailwindcss", "shadcnui"]
published: true
---

## ã“ã®è¨˜äº‹ã®è¦ç´„ (ãƒªãƒã‚¸ãƒˆãƒªã ã‘è¦‹ãŸã„äººå‘ã‘)

Next.js (15.2.1) + MDX + shadcn/ui + Tailwind CSS ã§ã€Œ**å…¬å¼ãƒ©ã‚¤ã‚¯ & ãƒŸãƒ‹ãƒãƒ«ãªãƒ–ãƒ­ã‚°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**ã€ã‚’ä½œæˆã—ã¾ã—ãŸï¼

ã“ã¡ã‚‰ã®ãƒªãƒã‚¸ãƒˆãƒªã§å…¬é–‹ã—ã¦ã„ã¾ã™ï¼ãœã²è¦‹ã¦ã„ã£ã¦ãã ã•ã„ï¼

https://github.com/cakegaly/next-minimal-blog

## ã¯ã˜ã‚ã«

Next.js ã¯ã€å…¬å¼ã§ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€SSR / SG (SSG) / ISR / API Routes / Middleware / RSC ãªã©ã€ã€ŒWeb ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹ã“ã¨ãªã‚‰ä¿ºã«ä»»ã›ã‚ï¼ãªã‚“ã§ã‚‚ã§ãã‚‹ãœï¼ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«é€²åŒ–ã—ã¦ã„ã¾ã™ã€‚

ä¸€æ–¹ã§ã€ã“ã‚“ãªå£°ã‚‚ã‚ˆãè€³ã«ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

- ã€Œã§ãã‚‹ã“ã¨ãŒå¤šã™ãã¦ã€ã©ã‚Œã‚’é¸ã¹ã°ã„ã„ã‹ã‚ã‹ã‚‰ãªã„ï¼ã€
- ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€æ›¸ãæ–¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¤šã™ãã¦è¿·ã†ï¼ã€
- ã€Œé€²åŒ–ãŒé€Ÿã™ãã¦è¿½ã„ãã‚Œãªã„ï¼æ°—ã¥ã‘ã°å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦ãŸï¼›ï¼›ã€
- ã€Œã‚·ãƒ³ãƒ—ãƒ«ã«å§‹ã‚ãŸã„ã®ã«ã€æœ€åˆã‹ã‚‰è¤‡é›‘ã™ãã‚‹ã€

ç­†è€…è‡ªèº«ã‚‚ã€ã€ŒNext.js ã‚’ä½¿ã£ã¦ã‚µã‚¯ãƒƒã¨ã‚·ãƒ³ãƒ—ãƒ«ãªã‚µã‚¤ãƒˆã‚’ä½œã‚ŠãŸã„ã ã‘ãªã®ã«ã€æ°—ã¥ã‘ã°ä¾å­˜ã‚„è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã ã‚‰ã‘ã€ã¨ã„ã†ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã—ãŸã€‚

ãã“ã§ã€ **ã€ŒãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼å…¬å¼ã® Next.js / Vercel è£½ã ã‘ã§ã©ã“ã¾ã§ã§ãã‚‹ï¼ï¼Ÿã€** ã‚’ãƒ†ãƒ¼ãƒã«ã€ **Next.js 15 (App Router) + MDX + shadcn/ui + Tailwind CSS ãƒ–ãƒ­ã‚°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ** ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚

## next-minimal-blog ã®ç´¹ä»‹

### æŠ€è¡“æ§‹æˆ

- Next.js 15.2.1 (App Router) / React 19.0.0
- MDX
- Tailwind CSS + shadcn/ui

### ãŠã™ã™ã‚ã—ãŸã„äºº

- Next.js / Vercel ã‚’å­¦ã³ãŸã„åˆå¿ƒè€…
- ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ CMS / API é€£æºãªã©ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚’æ¤œè¨ä¸­ã ã‘ã©ã€ã¨ã‚Šã‚ãˆãšãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’çµ„ã‚“ã§ã¿ãŸã„äºº
- ã‚·ãƒ³ãƒ—ãƒ«ã§è»½é‡ãªã‚µã‚¤ãƒˆã‚’æŒã¡ãŸã„äºº

### æ©Ÿèƒ½ä¸€è¦§

- MDX ã«ã‚ˆã‚‹è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
- RSS XML (Atom) ã®è‡ªå‹•ç”Ÿæˆ
- ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ (OGP fetch)
- ã‚µã‚¤ãƒˆãƒãƒƒãƒ— / Robots.txt è‡ªå‹•ç”Ÿæˆ
- shadcn/ui + Tailwind CSS + rehype-pretty-code ã«ã‚ˆã‚‹ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- lucide-react ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¤ã‚³ãƒ³ç®¡ç†

Zenn ãƒ©ã‚¤ã‚¯ã«ã€Œè¨˜äº‹ã®ãƒ†ãƒ¼ãƒãŒä¸€ç›®ã§ã‚ã‹ã‚‹ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ„è­˜ã—ã¦ã€
è¨˜äº‹ã”ã¨ã« icon ã‚’æŒ‡å®š ã™ã‚‹ã¨ã€ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ (è¨˜äº‹ä¸€è¦§) ã®ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

```mdx
---
title: Next.js ã«ã¤ã„ã¦ã®è¨˜äº‹
date: 2025-03-09
icon: nextjs
---
```

![ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º (ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)](https://storage.googleapis.com/zenn-user-upload/ab86db9b4af4-20250310.png)
_ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º (ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)_

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```sh
src/
â”œâ”€â”€ actions/        # Server Actions (ä¾‹: OGP ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ fetch)
â”œâ”€â”€ app/            # App Router ãƒšãƒ¼ã‚¸ç¾¤ + RSS, Sitemap, Robots
â”œâ”€â”€ components/     # UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ content/        # è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ (MDX)
â”œâ”€â”€ config/         # ã‚µã‚¤ãƒˆè¨­å®š / ã‚¿ã‚°ç®¡ç†
â”œâ”€â”€ lib/            # å„ç¨®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (MDX, OGP, pagination)
â”œâ”€â”€ styles/         # ã‚µã‚¤ãƒˆå…¨ä½“ & MDX ã‚¹ã‚¿ã‚¤ãƒ«
â””â”€â”€ types/          # å‹å®šç¾©
```

é–‹ç™ºè€…å‘ã‘ã®è¨­å®šã¨ã—ã¦ã€ç§ãŒ Next.js ã§é–‹ç™ºã™ã‚‹ã¨ãã® ESLint, Prettier, VSCode ã®è¨­å®šã‚‚ãƒªãƒã‚¸ãƒˆãƒªã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

æ•£ã‚‰ã‹ã‚ŠãŒã¡ãª `components/` ä»¥ä¸‹ã¯ã€ç”¨é€”åˆ¥ã«åˆ†é¡ã—ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã¦ã„ã¾ã™ã€‚`shadcn/ui` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç®¡ç†ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¤ã„ã¦ã¯ã€ã‚ˆã‚Šã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® `components/ui/` ã‹ã‚‰ `components/shadcn-ui/` ã«ãƒªãƒãƒ¼ãƒ ã—ã¦ã„ã¾ã™ã€‚

```sh
components/
â”œâ”€â”€ content/      # MDX ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºã«é–¢ã™ã‚‹ã‚‚ã®
â”œâ”€â”€ icons/        # ã‚¢ã‚¤ã‚³ãƒ³ç´ æ (svg)
â”œâ”€â”€ layout/       # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé–¢é€£ (site-header, site-footer, mode-switch ãªã©)
â”œâ”€â”€ shared/       # æ±ç”¨ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (callout, pagination ãªã©)
â””â”€â”€ shadcn-ui/    # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```

### åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸€è¦§

```sh
dependencies:
@mdx-js/mdx, @radix-ui/react-slot, separator, switch, lucide-react, next, react, react-dom
tailwindcss, tailwind-scrollbar, tailwindcss-animate, rehype-pretty-code, remark-gfm
gray-matter, class-variance-authority, clsx, tailwind-merge, next-themes

devDependencies:
@next/eslint-plugin-next, @types, prettier, prettier-plugin-tailwindcss
eslint, eslint-plugin-import, eslint-plugin-react, typescript-eslint, postcss, autoprefixer
```

ESLint, Prettier, Tailwind ã«é–¢é€£ã™ã‚‹ã‚‚ã®ä»¥å¤–ã¯ã€ã€Œå…¬å¼ > å…¬å¼æ¨å¥¨ > å¿…è¦æœ€ä½é™ã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã®é †ã«å³é¸ã—ã¾ã—ãŸã€‚

ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆç”¨é€”ã«ã¯ã€å…¬å¼æ¨å¥¨ã® rehype-pretty-code (shiki) + remark-gfm ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

`@radix-ui` é–¢é€£ã¯ã€å‘¼ã³å‡ºã—å…ƒã® shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§æœ€ä½é™å¿…è¦ãªã‚‚ã®ã ã‘ã«çµã£ã¦ã„ã¾ã™ã€‚

### ä¸»ãªè‡ªä½œæ©Ÿèƒ½

**ã€Œã¨ã‚Šã‚ãˆãšå‹•ã‹ã—ãŸã„ã‘ã©ã€ä½™è¨ˆãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯å¢—ã‚„ã—ãŸããªã„ã€** ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã¯ã€**Next.js æ¨™æº–ã® API / RSC / route handler** ã ã‘ã§å®Œçµã•ã›ã¾ã—ãŸã€‚

| æ©Ÿèƒ½                     | èª¬æ˜                                                 | ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®                                       |
| ------------------------ | ---------------------------------------------------- | ---------------------------------------------------- |
| **MDX ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†**   | ã‚·ãƒ³ãƒ—ãƒ«ãªè¨˜äº‹ãƒ•ã‚¡ã‚¤ãƒ« (MDX) ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—          | `fs`, `@mdx-js/mdx` ã«ã‚ˆã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’è¿½åŠ ã—ã¦å¯¾å¿œ |
| **OGP ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ fetch** | ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ (ãƒªãƒ³ã‚¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼) ã®ãŸã‚ã® OG ã‚¿ã‚°å–å¾— | `fetch` (å…¬å¼ API ã ã‘)                              |
| **RSS ãƒ•ã‚£ãƒ¼ãƒ‰å‡ºåŠ›**     | è¨˜äº‹ä¸€è¦§ã‹ã‚‰ RSS XML ã‚’è‡ªå‹•ç”Ÿæˆ                      | App Router + `Response` API                          |
| **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**     | ãƒšãƒ¼ã‚¸åˆ†å‰²è¡¨ç¤º                                       | è‡ªä½œ paginate é–¢æ•° (hooks ãªã—)                      |

#### MDX ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†

ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã€`gray-matter` ã«ã‚ˆã‚‹ Frontmatter ãƒ‘ãƒ¼ã‚¹å‡¦ç†ãªã©ã‚’ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¨ã—ã¦ã¾ã¨ã‚ã¦å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚`compileMDX` ãªã—ã§ã€RSC å‘ã‘ã«ã‚‚æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

```ts:lib/mdx.ts
import fs from "fs";
import matter from "gray-matter";

export async function getAllBlogPosts() {
  const files = await fs.promises.readdir("src/content/blog");
  return await Promise.all(
    files.map(async (file) => {
      const raw = await fs.promises.readFile(
        `src/content/blog/${file}`,
        "utf-8"
      );
      const { data, content } = matter(raw);
      return {
        metadata: data,
        slug: file.replace(/\.mdx$/, ""),
        rawContent: content,
      };
    })
  );
}
```

ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¨ã„ã£ã¦ã‚‚ä¸­èº«ã¯ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (ä»Šå›ã®å ´åˆã€`src/content/blog/`) ã®å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `fs` ã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ã ã‘ã§ã™ï¼

```ts:lib/mdx.ts
export async function getBlogPostBySlug(slug: string) {
  return getBlogPost((post) => post.slug === slug);
}

async function getBlogPost(
  predicate: (post: BlogPost) => boolean
): Promise<BlogPost | undefined> {
  const posts = await getAllBlogPosts();
  return posts.find(predicate);
}

async function getMDXData<T>(dir: string): Promise<MDXData<T>[]> {
  const files = await getMDXFiles(dir);
  return Promise.all(files.map((file) => readMDXFile<T>(path.join(dir, file))));
}

async function getMDXFiles(dir: string): Promise<string[]> {
  return (await fs.promises.readdir(dir)).filter(
    (file) => path.extname(file) === '.mdx'
  );
}

async function readMDXFile<T>(filePath: string): Promise<MDXData<T>> {
  const rawContent = await fs.promises.readFile(filePath, 'utf-8');

  const { data, content } = matter(rawContent);

  return {
    metadata: data as Frontmatter<T>,
    slug: path.basename(filePath, path.extname(filePath)),
    rawContent: content,
  };
}
```

ã“ã®è€ƒãˆæ–¹ã¯ã€Vercel ã® Leerob ã•ã‚“ã®è¦‹è§£ãŒã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚

https://archive.leerob.io/blog/2023

MDX ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºã‚‚ã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (mdx-components.tsx) ã§æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ã¯ã€Tailwind Typography (`prose`) ã‚’å°å…¥ã›ãšã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§ã™ã¹ã¦å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

```tsx:src/components/content/mdx-components.tsx
export const components = {
  h2: (props) => <h2 className="mt-12 text-2xl font-bold" {...props} />,
  a: (props) => <a className="text-primary underline" {...props} />,
  pre: (props) => <pre className="bg-muted/30 rounded-lg p-4" {...props} />,
  Callout,
  LinkPreview,
  // ...
};
```

ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã¯ã€å…¬å¼ã® `@mdx-js/mdx` ã§ `evaluate()` ã™ã‚‹ã¨ãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã« `rehype-pretty-code`, `remark-gfm` ã‚’æŒ‡å®šã—ã¦åæ˜ ã•ã›ã¦ã„ã¾ã™ã€‚

```tsx:components/content/custom-mdx.tsx
import { evaluate, type EvaluateOptions } from "@mdx-js/mdx";
import * as React from "react";
import * as runtime from "react/jsx-runtime";
import rehypePrettyCode from "rehype-pretty-code";
import remarkGfm from "remark-gfm";

import { components } from "@/components/content/mdx-components";

interface CustomMDXProps {
  source: string;
  additionalComponents?: Record<string, React.ComponentType<any>>;
}

const rehypePrettyCodeOptions = {
  theme: "github-dark",
  keepBackground: true,
  defaultLang: "plaintext",
};

export async function CustomMDX({
  source,
  additionalComponents,
}: CustomMDXProps) {
  try {
    const options: EvaluateOptions = {
      ...runtime,
      remarkPlugins: [remarkGfm],
      rehypePlugins: [[rehypePrettyCode, rehypePrettyCodeOptions]],
    };

    const { default: MDXContent } = await evaluate(source, options);

    const mergedComponents = {
      ...components,
      ...(additionalComponents || {}),
    };

    return <MDXContent components={mergedComponents} />;
  } catch (error) {
    console.error("Error rendering MDX:", error);
    return (
      <div className="border-destructive/50 bg-destructive/10 text-destructive rounded-md border p-4">
        An error occurred while rendering the content.
      </div>
    );
  }
}
```

OGP ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã® fetch ã¨åˆã‚ã›ã¦ã€URL ã‚’æŒ‡å®šã™ã‚Œã°ã€ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚è¡¨ç¤ºã§ãã¾ã™ã€‚

ä¾‹ã¨ã—ã¦ã€

```mdx
GitHub ãƒªãƒã‚¸ãƒˆãƒªã¯ã€ã“ã¡ã‚‰ã§ã™ã€‚

<LinkPreview url="https://github.com/cakegaly/next-minimal-blog" />
```

ã¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º (ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)](https://storage.googleapis.com/zenn-user-upload/b926a3870dc0-20250310.png)
_ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º (ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰)_

#### OGP ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ fetch (ãƒªãƒ³ã‚¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼)

ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ (ãƒªãƒ³ã‚¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼) ç”¨ã® OGP ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯ã€Server Action ã§ fetch ã—ã¦å–å¾—ã—ã¦ã„ã¾ã™ã€‚

```ts:actions/fetch-og-metadata.ts
"use server";

import { cache } from "react";

interface OGData {
  title: string;
  description: string;
  image: string;
  url: string;
}

export const getOGData = cache(
  async (url: string): Promise<Partial<OGData>> => {
    try {
      const response = await fetch(url, {
        headers: {
          "User-Agent": "bot",
        },
      });

      const html = await response.text();

      const getMetaContent = (property: string): string | undefined => {
        const regex = new RegExp(
          `<meta[^>]+(?:property|name)="${property}"[^>]+content="([^"]+)"`,
          "i"
        );
        return regex.exec(html)?.[1];
      };

      const titleMatch = /<title>(.*?)<\/title>/i.exec(html);

      return {
        title: getMetaContent("og:title") || titleMatch?.[1] || "",
        description:
          getMetaContent("og:description") ||
          getMetaContent("description") ||
          "",
        image: getMetaContent("og:image") || "",
        url,
      };
    } catch (error) {
      console.error("Error fetching OG data:", error);
      return { url };
    }
  }
);
```

#### RSS / Sitemap è‡ªå‹•ç”Ÿæˆ

next-sitemap ã‚„å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã‚ãšã«ã€App Router ã® route handler ã ã‘ã§å®Œçµã•ã›ã¦ã„ã¾ã™ã€‚

RSS (Atom ã§å‡ºåŠ›ã™ã‚‹ä¾‹):

```ts:app/rss.xml/route.ts
import { siteConfig } from "@/config/site";
import { getAllBlogPosts } from "@/lib/mdx";
import { NextResponse } from "next/server";

export async function GET() {
  const baseUrl = process.env.NEXT_PUBLIC_APP_URL || siteConfig.url;
  const posts = await getAllBlogPosts();

  const rssXml = `
    <rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
      <channel>
        <title>Your Blog Name</title>
        <link>${baseUrl}</link>
        <description>Your blog description here</description>
        <language>ja</language>
        <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>
        <atom:link href="${baseUrl}/rss.xml" rel="self" type="application/rss+xml"/>
        ${posts
          .map((post) => {
            return `
              <item>
                <title><![CDATA[${post.metadata.title}]]></title>
                <link>${baseUrl}/blog/${post.slug}</link>
                <guid isPermaLink="true">${baseUrl}/blog/${post.slug}</guid>
                <pubDate>${new Date(post.metadata.date).toUTCString()}</pubDate>
                <description><![CDATA[${
                  post.metadata.description || ""
                }]]></description>
                ${
                  post.metadata.tags
                    ? post.metadata.tags
                        .map((tag) => `<category>${tag}</category>`)
                        .join("")
                    : ""
                }
              </item>
            `;
          })
          .join("")}
      </channel>
    </rss>
  `.trim();

  return new NextResponse(rssXml, {
    headers: {
      "Content-Type": "application/xml",
      "Cache-Control": "public, max-age=3600, s-maxage=3600",
    },
  });
}
```

ã‚µã‚¤ãƒˆãƒãƒƒãƒ— (ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¨è¨˜äº‹ãƒšãƒ¼ã‚¸ã‚’å‡ºåŠ›ã™ã‚‹ä¾‹):

```ts:app/sitemap.ts
import { siteConfig } from "@/config/site";
import { getAllBlogPosts } from "@/lib/mdx";
import { MetadataRoute } from "next";

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const baseUrl = process.env.NEXT_PUBLIC_APP_URL || siteConfig.url;

  const posts = await getAllBlogPosts();

  const blogEntries = posts.map((post) => ({
    url: `${baseUrl}/blog/${post.slug}`,
    lastModified: new Date(post.metadata.date),
    changeFrequency: "weekly" as const,
    priority: 0.8,
  }));

  const staticPages = [
    {
      url: baseUrl,
      lastModified: new Date(),
      changeFrequency: "daily" as const,
      priority: 1.0,
    },
  ];

  return [...staticPages, ...blogEntries];
}
```

#### ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ

ãƒšãƒ¼ã‚¸æ•°ã®åˆè¨ˆã‚’ã‚‚ã¨ã«ã€å‰å¾Œã®ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯ã‚’å–å¾—ã™ã‚‹ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå‡¦ç†ã§å¯¾å¿œã—ã¾ã—ãŸã€‚

```ts:lib/pagination.ts
export interface PaginationResult<T> {
  items: T[];
  currentPage: number;
  totalPages: number;
  totalItems: number;
}

export function paginateItems<T>(
  items: T[],
  page = 1,
  pageSize = 10
): PaginationResult<T> {
  const totalItems = items.length;
  const totalPages = Math.ceil(totalItems / pageSize);
  const currentPage = Math.max(1, Math.min(page, totalPages));

  const startIndex = (currentPage - 1) * pageSize;
  const endIndex = Math.min(startIndex + pageSize, totalItems);

  return {
    items: items.slice(startIndex, endIndex),
    currentPage,
    totalPages,
    totalItems,
  };
}
```

shadcn/ui ã® Pagination ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å°å…¥ã—ã¦ã‚‚ (ã‚ˆã‚ŠæŸ”è»Ÿãªãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’) å®Ÿç¾ã§ãã¾ã™ãŒã€ãƒ–ãƒ­ã‚°ç”¨é€”ã§ã‚ã‚Œã°ãã“ã¾ã§ãƒšãƒ¼ã‚¸æ•°ã‚‚ã‹ã•ã¾ãªã„ã—ã€hooks ãªã—ã®é–¢æ•°ãƒ™ãƒ¼ã‚¹ã«ã—ãŸã»ã†ãŒæ¥½ã«ç®¡ç†ã§ããã†ã¨åˆ¤æ–­ã—ã¾ã—ãŸã€‚

:::message
microCMS, Notion API ãªã©ã€å¤–éƒ¨ã®ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ CMS ã¨é€£æºã™ã‚‹å ´åˆã¯ã€MDX ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° lib/mdx.ts ã‚’ã€CMS ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° (ä¾‹: lib/microcms.ts) ã«ç½®ãæ›ãˆã‚Œã°ã€ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æˆã®ã¾ã¾ã§å¯¾å¿œã§ãã¾ã™ï¼
:::

## ãŠã‚ã‚Šã«

> å…¬å¼æ©Ÿèƒ½ã ã‘ã§ã€ã©ã“ã¾ã§ã€Œã¡ã‚‡ã†ã©ã„ã„ã€ãƒ–ãƒ­ã‚°ãŒä½œã‚Œã‚‹ã‹ãªï¼ï¼Ÿ

ãã‚“ãªæ€ã„ç«‹ã¡ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ç´¹ä»‹ã§ã—ãŸã€‚ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼

ã‚·ãƒ³ãƒ—ãƒ«ã§ãƒŸãƒ‹ãƒãƒ«ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œã£ãŸã¤ã‚‚ã‚ŠãŒã€æ°—ã¥ã‘ã°é•·ã„è¨˜äº‹ã«ãªã£ã¡ã‚ƒã„ã¾ã—ãŸã­ï¼ˆç¬‘ï¼‰èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ãœã² Fork, Star ã—ã¦ã¿ã¦ãã ã•ã„ï¼

https://github.com/cakegaly/next-minimal-blog
